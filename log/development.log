  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-10-21 09:25:08.601164', '2024-10-21 09:25:08.601172') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20241021092203)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241021092203') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTeams (20241021092205)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "teams" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241021092205') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateStocks (20241021092207)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "stocks" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241021092207') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateWallets (20241021092209)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "wallets" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "balance" decimal DEFAULT 0.0 NOT NULL, "walletable_type" varchar NOT NULL, "walletable_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_wallets_on_walletable" ON "wallets" ("walletable_type", "walletable_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241021092209') RETURNING "version"[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTransactions (20241021092212)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" decimal NOT NULL, "transaction_type" integer NOT NULL, "source_wallet_id" integer, "target_wallet_id" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c43e57190f"
FOREIGN KEY ("source_wallet_id")
  REFERENCES "wallets" ("id")
, CONSTRAINT "fk_rails_0226e8eeea"
FOREIGN KEY ("target_wallet_id")
  REFERENCES "wallets" ("id")
)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_source_wallet_id" ON "transactions" ("source_wallet_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_target_wallet_id" ON "transactions" ("target_wallet_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241021092212') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/users" for ::1 at 2024-10-21 16:46:24 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (uninitialized constant UsersController):

Causes:
ActionDispatch::MissingController (uninitialized constant UsersController)
NameError (uninitialized constant UsersController)
  
Started POST "/users" for ::1 at 2024-10-21 16:50:39 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"Fajar Dwi Rianto", "user"=>{"name"=>"Fajar Dwi Rianto"}}
Completed 500 Internal Server Error in 19ms (ActiveRecord: 1.5ms (0 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method `new' for nil:NilClass):
  
app/controllers/users_controller.rb:3:in `create'
Started POST "/users" for ::1 at 2024-10-21 16:50:41 +0700
Processing by UsersController#create as */*
  Parameters: {"name"=>"Fajar Dwi Rianto", "user"=>{"name"=>"Fajar Dwi Rianto"}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method `new' for nil:NilClass):
  
app/controllers/users_controller.rb:3:in `create'
Started POST "/users" for ::1 at 2024-10-21 16:50:42 +0700
Processing by UsersController#create as */*
  Parameters: {"name"=>"Fajar Dwi Rianto", "user"=>{"name"=>"Fajar Dwi Rianto"}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method `new' for nil:NilClass):
  
app/controllers/users_controller.rb:3:in `create'
Started POST "/users" for ::1 at 2024-10-21 16:51:05 +0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"John Doe"}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method `new' for nil:NilClass):
  
app/controllers/users_controller.rb:3:in `create'
Started POST "/users" for ::1 at 2024-10-21 16:53:36 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Fajar Dwi Rianto"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/users_controller.rb:5:in `create'
  [1m[36mUser Create (5.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Fajar Dwi Rianto"], ["created_at", "2024-10-21 09:53:36.714636"], ["updated_at", "2024-10-21 09:53:36.714636"]]
  â†³ app/controllers/users_controller.rb:5:in `create'
  [1m[36mWallet Create (0.4ms)[0m  [1m[32mINSERT INTO "wallets" ("balance", "walletable_type", "walletable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["balance", 0.0], ["walletable_type", "User"], ["walletable_id", 1], ["created_at", "2024-10-21 09:53:36.804604"], ["updated_at", "2024-10-21 09:53:36.804604"]]
  â†³ app/models/user.rb:9:in `create_wallet'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."walletable_id" = ? AND "wallets"."walletable_type" = ? LIMIT ?[0m  [["walletable_id", 1], ["walletable_type", "User"], ["LIMIT", 1]]
  â†³ app/models/user.rb:9:in `create_wallet'
  [1m[36mTRANSACTION (7.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/users_controller.rb:5:in `create'
Completed 201 Created in 131ms (Views: 0.7ms | ActiveRecord: 15.9ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/teams" for ::1 at 2024-10-21 16:55:44 +0700
  
ActionController::RoutingError (uninitialized constant TeamsController):

Causes:
ActionDispatch::MissingController (uninitialized constant TeamsController)
NameError (uninitialized constant TeamsController)
  
Started POST "/teams" for ::1 at 2024-10-21 17:00:40 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TeamsController#create as */*
  Parameters: {"team"=>{"name"=>"Development Team"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/teams_controller.rb:5:in `create'
  [1m[36mTeam Create (2.4ms)[0m  [1m[32mINSERT INTO "teams" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Development Team"], ["created_at", "2024-10-21 10:00:40.487296"], ["updated_at", "2024-10-21 10:00:40.487296"]]
  â†³ app/controllers/teams_controller.rb:5:in `create'
  [1m[36mWallet Create (0.5ms)[0m  [1m[32mINSERT INTO "wallets" ("balance", "walletable_type", "walletable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["balance", 0.0], ["walletable_type", "Team"], ["walletable_id", 1], ["created_at", "2024-10-21 10:00:40.529646"], ["updated_at", "2024-10-21 10:00:40.529646"]]
  â†³ app/models/team.rb:9:in `create_wallet'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."walletable_id" = ? AND "wallets"."walletable_type" = ? LIMIT ?[0m  [["walletable_id", 1], ["walletable_type", "Team"], ["LIMIT", 1]]
  â†³ app/models/team.rb:9:in `create_wallet'
  [1m[36mTRANSACTION (4.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/teams_controller.rb:5:in `create'
Completed 201 Created in 72ms (Views: 0.6ms | ActiveRecord: 10.3ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/stocks" for ::1 at 2024-10-21 17:01:23 +0700
Processing by StocksController#create as */*
  Parameters: {"stock"=>{"name"=>"Microsoft"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/stocks_controller.rb:5:in `create'
  [1m[36mStock Create (1.8ms)[0m  [1m[32mINSERT INTO "stocks" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Microsoft"], ["created_at", "2024-10-21 10:01:23.580646"], ["updated_at", "2024-10-21 10:01:23.580646"]]
  â†³ app/controllers/stocks_controller.rb:5:in `create'
  [1m[36mWallet Create (0.3ms)[0m  [1m[32mINSERT INTO "wallets" ("balance", "walletable_type", "walletable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["balance", 0.0], ["walletable_type", "Stock"], ["walletable_id", 1], ["created_at", "2024-10-21 10:01:23.586014"], ["updated_at", "2024-10-21 10:01:23.586014"]]
  â†³ app/models/stock.rb:9:in `create_wallet'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."walletable_id" = ? AND "wallets"."walletable_type" = ? LIMIT ?[0m  [["walletable_id", 1], ["walletable_type", "Stock"], ["LIMIT", 1]]
  â†³ app/models/stock.rb:9:in `create_wallet'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/stocks_controller.rb:5:in `create'
Completed 201 Created in 20ms (Views: 0.4ms | ActiveRecord: 4.1ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-21 17:02:07 +0700
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:5)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>100.0, "transaction_type"=>"credit", "target_wallet_id"=>1}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mTransaction Create (1.8ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 100.0], ["transaction_type", 0], ["source_wallet_id", nil], ["target_wallet_id", 1], ["created_at", "2024-10-21 10:02:07.379026"], ["updated_at", "2024-10-21 10:02:07.379026"]]
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (2.7ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 100.0], ["updated_at", "2024-10-21 10:02:07.389850"], ["id", 1]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 201 Created in 44ms (Views: 0.3ms | ActiveRecord: 6.5ms (5 queries, 0 cached) | GC: 0.0ms)


Started POST "/prices" for ::1 at 2024-10-21 23:09:43 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [POST] "/prices"):
  
Started POST "/prices" for ::1 at 2024-10-22 01:35:47 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [POST] "/prices"):
  
Started POST "/transactions" for ::1 at 2024-10-22 01:35:55 +0700
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:5)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>1000.0, "transaction_type"=>"credit", "target_wallet_id"=>1}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/transaction.rb:13:in `validate_wallets'
  [1m[36mTransaction Create (1.3ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 1000.0], ["transaction_type", 0], ["source_wallet_id", nil], ["target_wallet_id", 1], ["created_at", "2024-10-21 18:35:55.780059"], ["updated_at", "2024-10-21 18:35:55.780059"]]
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mTRANSACTION (5.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (1.7ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 1100.0], ["updated_at", "2024-10-21 18:35:55.816250"], ["id", 1]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 201 Created in 86ms (Views: 0.6ms | ActiveRecord: 14.7ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-22 01:42:36 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (uninitialized constant WalletsController):

Causes:
ActionDispatch::MissingController (uninitialized constant WalletsController)
NameError (uninitialized constant WalletsController)
  
Started GET "/wallets/1/balance" for ::1 at 2024-10-22 01:43:10 +0700
  
ActionController::RoutingError (uninitialized constant WalletsController):

Causes:
ActionDispatch::MissingController (uninitialized constant WalletsController)
NameError (uninitialized constant WalletsController)
  
Started GET "/wallets/1/balance" for ::1 at 2024-10-22 01:43:12 +0700
  
ActionController::RoutingError (uninitialized constant WalletsController):

Causes:
ActionDispatch::MissingController (uninitialized constant WalletsController)
NameError (uninitialized constant WalletsController)
  
Started GET "/wallets/1/balance" for ::1 at 2024-10-22 01:43:14 +0700
  
ActionController::RoutingError (uninitialized constant WalletsController):

Causes:
ActionDispatch::MissingController (uninitialized constant WalletsController)
NameError (uninitialized constant WalletsController)
  
Started GET "/wallets/1/balance" for ::1 at 2024-10-22 01:43:16 +0700
  
ActionController::RoutingError (uninitialized constant WalletsController):

Causes:
ActionDispatch::MissingController (uninitialized constant WalletsController)
NameError (uninitialized constant WalletsController)
  
Started GET "/wallets/1/balance" for ::1 at 2024-10-22 01:44:36 +0700
  
ArgumentError (Missing :controller key on routes definition, please check your routes.):
  
config/routes.rb:17:in `block in <main>'
config/routes.rb:1:in `<main>'
Started GET "/wallets/1/balance" for ::1 at 2024-10-22 01:45:12 +0700
  
ActionController::RoutingError (uninitialized constant WalletsController):

Causes:
ActionDispatch::MissingController (uninitialized constant WalletsController)
NameError (uninitialized constant WalletsController)
  
Started GET "/wallets/1/balance" for ::1 at 2024-10-22 01:46:39 +0700
  
ActionController::RoutingError (uninitialized constant WalletsController):

Causes:
ActionDispatch::MissingController (uninitialized constant WalletsController)
NameError (uninitialized constant WalletsController)
  
Started GET "/wallets/1/balance" for ::1 at 2024-10-22 01:46:41 +0700
  
ActionController::RoutingError (uninitialized constant WalletsController):

Causes:
ActionDispatch::MissingController (uninitialized constant WalletsController)
NameError (uninitialized constant WalletsController)
  
Started GET "/wallets/1/balance" for ::1 at 2024-10-22 02:09:02 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (uninitialized constant WalletsController):

Causes:
ActionDispatch::MissingController (uninitialized constant WalletsController)
NameError (uninitialized constant WalletsController)
  
Started GET "/wallets/1/balance" for ::1 at 2024-10-22 02:09:03 +0700
  
ActionController::RoutingError (uninitialized constant WalletsController):

Causes:
ActionDispatch::MissingController (uninitialized constant WalletsController)
NameError (uninitialized constant WalletsController)
  
Started GET "/wallets/1/balance" for ::1 at 2024-10-22 02:09:04 +0700
  
ActionController::RoutingError (uninitialized constant WalletsController):

Causes:
ActionDispatch::MissingController (uninitialized constant WalletsController)
NameError (uninitialized constant WalletsController)
  
Started GET "/wallets/2/balance" for ::1 at 2024-10-22 02:09:08 +0700
  
ActionController::RoutingError (uninitialized constant WalletsController):

Causes:
ActionDispatch::MissingController (uninitialized constant WalletsController)
NameError (uninitialized constant WalletsController)
  
Started GET "/wallets/2/balance" for ::1 at 2024-10-22 02:09:09 +0700
  
ActionController::RoutingError (uninitialized constant WalletsController):

Causes:
ActionDispatch::MissingController (uninitialized constant WalletsController)
NameError (uninitialized constant WalletsController)
  
Started GET "/wallets/2/balance" for ::1 at 2024-10-22 02:09:12 +0700
  
ActionController::RoutingError (uninitialized constant WalletsController):

Causes:
ActionDispatch::MissingController (uninitialized constant WalletsController)
NameError (uninitialized constant WalletsController)
  
Started GET "/wallets/1/balance" for ::1 at 2024-10-22 02:09:23 +0700
  
ActionController::RoutingError (uninitialized constant WalletsController):

Causes:
ActionDispatch::MissingController (uninitialized constant WalletsController)
NameError (uninitialized constant WalletsController)
  
Started GET "/wallets/1/balance" for ::1 at 2024-10-22 02:10:26 +0700
Processing by WalletsController#balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (1.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `balance'
Completed 500 Internal Server Error in 67ms (ActiveRecord: 6.3ms (1 query, 0 cached) | GC: 0.0ms)


  
NameError (undefined local variable or method `transactions' for #<Wallet id: 1, balance: 0.11e4, walletable_type: "User", walletable_id: 1, created_at: "2024-10-21 09:53:36.804604000 +0000", updated_at: "2024-10-21 18:35:55.816250000 +0000">):
  
app/models/wallet.rb:14:in `calculate_balance'
app/controllers/wallets_controller.rb:4:in `balance'
Started GET "/wallets/1/balance" for ::1 at 2024-10-22 02:13:29 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by WalletsController#balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (1.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `balance'
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:5)
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 72ms (Views: 0.3ms | ActiveRecord: 3.4ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-22 02:14:32 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by WalletsController#balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `balance'
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:5)
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 60ms (Views: 0.4ms | ActiveRecord: 2.9ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-22 02:17:23 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:5)
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 43ms (Views: 0.5ms | ActiveRecord: 3.6ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/users" for ::1 at 2024-10-22 02:20:56 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Fajar Dwi Rianto"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/users_controller.rb:5:in `create'
  [1m[36mUser Create (2.8ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Fajar Dwi Rianto"], ["created_at", "2024-10-21 19:20:56.245133"], ["updated_at", "2024-10-21 19:20:56.245133"]]
  â†³ app/controllers/users_controller.rb:5:in `create'
  [1m[36mWallet Create (0.4ms)[0m  [1m[32mINSERT INTO "wallets" ("balance", "walletable_type", "walletable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["balance", 0.0], ["walletable_type", "User"], ["walletable_id", 2], ["created_at", "2024-10-21 19:20:56.283525"], ["updated_at", "2024-10-21 19:20:56.283525"]]
  â†³ app/models/user.rb:9:in `create_wallet'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."walletable_id" = ? AND "wallets"."walletable_type" = ? LIMIT ?[0m  [["walletable_id", 2], ["walletable_type", "User"], ["LIMIT", 1]]
  â†³ app/models/user.rb:9:in `create_wallet'
  [1m[36mTRANSACTION (7.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/users_controller.rb:5:in `create'
Completed 201 Created in 78ms (Views: 1.0ms | ActiveRecord: 13.4ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-22 02:21:28 +0700
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:5)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>500.0, "transaction_type"=>"debut", "source_wallet_id"=>1}}
Completed 500 Internal Server Error in 15ms (ActiveRecord: 1.5ms (0 queries, 0 cached) | GC: 0.0ms)


  
ArgumentError ('debut' is not a valid transaction_type):
  
app/controllers/transactions_controller.rb:3:in `create'
Started POST "/transactions" for ::1 at 2024-10-22 02:21:34 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>500.0, "transaction_type"=>"debit", "source_wallet_id"=>1}}
Completed 422 Unprocessable Content in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-22 02:21:48 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>500.0, "transaction_type"=>"debit", "source_wallet_id"=>1}}
Completed 422 Unprocessable Content in 5ms (Views: 0.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-22 02:21:52 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.7ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 1.2ms (3 queries, 0 cached) | GC: 1.8ms)


Started GET "/wallets/2/balance" for ::1 at 2024-10-22 02:21:59 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"2"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 0.9ms)


Started POST "/transactions" for ::1 at 2024-10-22 02:22:32 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>500.0, "transaction_type"=>"credit", "target_wallet_id"=>1}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mTransaction Create (2.1ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 500.0], ["transaction_type", 0], ["source_wallet_id", nil], ["target_wallet_id", 1], ["created_at", "2024-10-21 19:22:32.056500"], ["updated_at", "2024-10-21 19:22:32.056500"]]
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (4.1ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 1600.0], ["updated_at", "2024-10-21 19:22:32.066115"], ["id", 1]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 201 Created in 28ms (Views: 0.3ms | ActiveRecord: 7.1ms (5 queries, 0 cached) | GC: 6.8ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-22 02:22:40 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 61ms (Views: 0.2ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 53.8ms)


Started POST "/transactions" for ::1 at 2024-10-22 02:22:54 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>500.0, "transaction_type"=>"debit", "source_wallet_id"=>1}}
Completed 422 Unprocessable Content in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-22 02:24:36 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>200.0, "transaction_type"=>"debit", "source_wallet_id"=>1, "target_wallet_id"=>2}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/transaction.rb:15:in `validate_wallets'
  [1m[36mWallet Load (2.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:15:in `validate_wallets'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 200.0], ["transaction_type", 1], ["source_wallet_id", 1], ["target_wallet_id", 2], ["created_at", "2024-10-21 19:24:36.646979"], ["updated_at", "2024-10-21 19:24:36.646979"]]
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
Completed 500 Internal Server Error in 14ms (ActiveRecord: 2.9ms (2 queries, 0 cached) | GC: 0.9ms)


  
NoMethodError (undefined method `deibt?' for #<Transaction id: 4, amount: 0.2e3, transaction_type: "debit", source_wallet_id: 1, target_wallet_id: 2, created_at: "2024-10-21 19:24:36.646979000 +0000", updated_at: "2024-10-21 19:24:36.646979000 +0000">):
  
app/controllers/transactions_controller.rb:8:in `create'
Started POST "/transactions" for ::1 at 2024-10-22 02:25:05 +0700
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:5)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>200.0, "transaction_type"=>"debit", "source_wallet_id"=>1, "target_wallet_id"=>2}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/transaction.rb:15:in `validate_wallets'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:15:in `validate_wallets'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 200.0], ["transaction_type", 1], ["source_wallet_id", 1], ["target_wallet_id", 2], ["created_at", "2024-10-21 19:25:05.372341"], ["updated_at", "2024-10-21 19:25:05.372341"]]
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mTRANSACTION (5.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:9:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (1.6ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 1400.0], ["updated_at", "2024-10-21 19:25:05.384576"], ["id", 1]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:21:in `calculate_balance'
  [1m[36mWallet Update (1.9ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 1200.0], ["updated_at", "2024-10-21 19:25:05.397810"], ["id", 1]]
  â†³ app/models/wallet.rb:21:in `calculate_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:21:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:21:in `calculate_balance'
  [1m[36mWallet Update (3.0ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 400.0], ["updated_at", "2024-10-21 19:25:05.407981"], ["id", 2]]
  â†³ app/models/wallet.rb:21:in `calculate_balance'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:21:in `calculate_balance'
Completed 201 Created in 72ms (Views: 0.4ms | ActiveRecord: 17.6ms (10 queries, 0 cached) | GC: 9.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-22 02:25:19 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 14ms (Views: 0.4ms | ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.7ms)


Started GET "/wallets/2/balance" for ::1 at 2024-10-22 02:25:32 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"2"}
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.1ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-22 02:25:47 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-22 02:25:56 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>100.0, "transaction_type"=>"debit", "source_wallet_id"=>1, "target_wallet_id"=>2}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/transaction.rb:15:in `validate_wallets'
  [1m[36mWallet Load (1.6ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:15:in `validate_wallets'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 100.0], ["transaction_type", 1], ["source_wallet_id", 1], ["target_wallet_id", 2], ["created_at", "2024-10-21 19:25:56.363090"], ["updated_at", "2024-10-21 19:25:56.363090"]]
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:9:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (2.0ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 1100.0], ["updated_at", "2024-10-21 19:25:56.371090"], ["id", 1]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:21:in `calculate_balance'
  [1m[36mWallet Update (1.6ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 500.0], ["updated_at", "2024-10-21 19:25:56.386226"], ["id", 2]]
  â†³ app/models/wallet.rb:21:in `calculate_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:21:in `calculate_balance'
Completed 201 Created in 34ms (Views: 0.4ms | ActiveRecord: 7.0ms (9 queries, 0 cached) | GC: 0.5ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-22 02:26:00 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 0.4ms (3 queries, 0 cached) | GC: 0.4ms)


Started GET "/wallets/2/balance" for ::1 at 2024-10-22 02:27:26 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"2"}
  [1m[36mWallet Load (0.9ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 21ms (Views: 0.8ms | ActiveRecord: 1.2ms (3 queries, 0 cached) | GC: 0.2ms)


  [1m[36mWallet Load (1.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" ORDER BY "wallets"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
Started POST "/transactions" for ::1 at 2024-10-22 02:46:11 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:5)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>200.0, "transaction_type"=>"debit", "source_wallet_id"=>2, "target_wallet_id"=>1}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/transaction.rb:15:in `validate_wallets'
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:15:in `validate_wallets'
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 200.0], ["transaction_type", 1], ["source_wallet_id", 2], ["target_wallet_id", 1], ["created_at", "2024-10-21 19:46:11.418261"], ["updated_at", "2024-10-21 19:46:11.418261"]]
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mTRANSACTION (7.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:9:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (2.4ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 300.0], ["updated_at", "2024-10-21 19:46:11.435000"], ["id", 2]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:21:in `calculate_balance'
  [1m[36mWallet Update (2.4ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 1300.0], ["updated_at", "2024-10-21 19:46:11.452001"], ["id", 1]]
  â†³ app/models/wallet.rb:21:in `calculate_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:21:in `calculate_balance'
Completed 201 Created in 86ms (Views: 0.7ms | ActiveRecord: 18.4ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/2/balance" for ::1 at 2024-10-22 02:46:20 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"2"}
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-22 02:46:25 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-22 02:46:46 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.4ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-22 02:51:27 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:5)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>1150.0, "transaction_type"=>"credit", "target_wallet_id"=>2}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/transaction.rb:13:in `validate_wallets'
  [1m[36mTransaction Create (0.6ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 1150.0], ["transaction_type", 0], ["source_wallet_id", nil], ["target_wallet_id", 2], ["created_at", "2024-10-21 19:51:27.753223"], ["updated_at", "2024-10-21 19:51:27.753223"]]
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mTRANSACTION (5.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (1.9ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 1450.0], ["updated_at", "2024-10-21 19:51:27.787524"], ["id", 2]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 201 Created in 90ms (Views: 0.7ms | ActiveRecord: 14.6ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/2/balance" for ::1 at 2024-10-22 02:51:36 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"2"}
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/stock_prices/price?symbol=AAP" for ::1 at 2024-10-22 03:03:35 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by StockPricesController#price as */*
  Parameters: {"symbol"=>"AAP"}
Completed 200 OK in 1396ms (Views: 0.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/stock_prices/price?symbol=AAP" for ::1 at 2024-10-22 03:04:33 +0700
Processing by StockPricesController#price as */*
  Parameters: {"symbol"=>"AAP"}
Completed 200 OK in 1546ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/stock_prices/any%20?symbol=AAP" for ::1 at 2024-10-22 03:05:02 +0700
  
ActionController::RoutingError (No route matches [GET] "/stock_prices/any%20"):
  
Started GET "/stock_prices/price?symbol=" for ::1 at 2024-10-22 03:05:16 +0700
Processing by StockPricesController#price as */*
  Parameters: {"symbol"=>""}
Completed 200 OK in 362ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/stock_prices/price?symbol=" for ::1 at 2024-10-22 03:06:20 +0700
Processing by StockPricesController#price as */*
  Parameters: {"symbol"=>""}
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 1.8ms)


  
URI::InvalidURIError (bad URI(is not URI?): "/equities "):
  
lib/latest_stock_price.rb:8:in `price'
app/controllers/stock_prices_controller.rb:4:in `price'
Started GET "/stock_prices/price?symbol=" for ::1 at 2024-10-22 03:07:21 +0700
  
ActionController::RoutingError (No route matches [GET] "/stock_prices/price"):
  
Started GET "/stock_prices/equities?symbol=" for ::1 at 2024-10-22 03:07:31 +0700
  
AbstractController::ActionNotFound (The action 'equities' could not be found for StockPricesController):
  
actionpack (7.2.1.1) lib/abstract_controller/base.rb:158:in `process'
actionpack (7.2.1.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (7.2.1.1) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (7.2.1.1) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (7.2.1.1) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (7.2.1.1) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (7.2.1.1) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (7.2.1.1) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (7.2.1.1) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (7.2.1.1) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (7.2.1.1) lib/action_dispatch/routing/route_set.rb:896:in `call'
rack (3.1.8) lib/rack/etag.rb:29:in `call'
rack (3.1.8) lib/rack/conditional_get.rb:31:in `call'
rack (3.1.8) lib/rack/head.rb:15:in `call'
activerecord (7.2.1.1) lib/active_record/migration.rb:674:in `call'
actionpack (7.2.1.1) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (7.2.1.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.2.1.1) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (7.2.1.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (7.2.1.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (7.2.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
actionpack (7.2.1.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (7.2.1.1) lib/rails/rack/logger.rb:41:in `call_app'
railties (7.2.1.1) lib/rails/rack/logger.rb:29:in `call'
actionpack (7.2.1.1) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (7.2.1.1) lib/action_dispatch/middleware/request_id.rb:33:in `call'
rack (3.1.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.2.1.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.2.1.1) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.2.1.1) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.2.1.1) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.2.1.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (7.2.1.1) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.1.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.2.1.1) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
railties (7.2.1.1) lib/rails/engine.rb:535:in `call'
puma (6.4.3) lib/puma/configuration.rb:272:in `call'
puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.3) lib/puma/request.rb:99:in `handle_request'
puma (6.4.3) lib/puma/server.rb:464:in `process_client'
puma (6.4.3) lib/puma/server.rb:245:in `block in run'
puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/stock_prices/equities?symbol=" for ::1 at 2024-10-22 03:07:54 +0700
Processing by StockPricesController#equities as */*
  Parameters: {"symbol"=>""}
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method `price' for LatestStockPrice:Class):
  
app/controllers/stock_prices_controller.rb:4:in `equities'
Started GET "/stock_prices/equities" for ::1 at 2024-10-22 03:11:35 +0700
Processing by StockPricesController#equities as */*
Completed 200 OK in 1019ms (Views: 52.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 27.0ms)


Started GET "/stock_prices/equitiesSearch?symbol=ZOMA.NS" for ::1 at 2024-10-22 03:16:21 +0700
Processing by StockPricesController#equitiesSearch as */*
  Parameters: {"symbol"=>"ZOMA.NS"}
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
URI::InvalidURIError (bad URI(is not URI?): "/equities-search "):
  
lib/latest_stock_price.rb:8:in `equitiesSearch'
app/controllers/stock_prices_controller.rb:4:in `equitiesSearch'
Started GET "/equities-search" for ::1 at 2024-10-22 03:16:29 +0700
  
ActionController::RoutingError (No route matches [GET] "/equities-search"):
  
Started GET "/stock_prices/equities-search?symbol=ZOMA.NS" for ::1 at 2024-10-22 03:17:26 +0700
Processing by StockPricesController#equitiesSearch as */*
  Parameters: {"symbol"=>"ZOMA.NS"}
Completed 500 Internal Server Error in 706ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.4ms)


  
NoMethodError (undefined method `search' for #<StockPricesController:0x00000000027fd8>):
  
app/controllers/stock_prices_controller.rb:4:in `equitiesSearch'
Started GET "/stock_prices/equitiesSearch?symbol=ZOMA.NS" for ::1 at 2024-10-22 03:17:30 +0700
  
ActionController::RoutingError (No route matches [GET] "/stock_prices/equitiesSearch"):
  
Started GET "/stock_prices/price_all" for ::1 at 2024-10-22 03:20:14 +0700
Processing by StockPricesController#price_all as */*
Completed 200 OK in 1038ms (Views: 37.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.8ms)


Started GET "/stock_prices/price?symbol=ZOMA.NS" for ::1 at 2024-10-22 03:21:26 +0700
Processing by StockPricesController#price as */*
  Parameters: {"symbol"=>"ZOMA.NS"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
URI::InvalidURIError (bad URI(is not URI?): "/equities-search "):
  
lib/latest_stock_price.rb:8:in `price'
app/controllers/stock_prices_controller.rb:5:in `price'
Started GET "/stock_prices/price?symbol=ZOMA.NS" for ::1 at 2024-10-22 03:21:57 +0700
Processing by StockPricesController#price as */*
  Parameters: {"symbol"=>"ZOMA.NS"}
Completed 200 OK in 2358ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.1ms)


Started GET "/stock_prices/price?symbol=ZOMA.NS" for ::1 at 2024-10-22 03:22:13 +0700
Processing by StockPricesController#price as */*
  Parameters: {"symbol"=>"ZOMA.NS"}
Completed 200 OK in 344ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.1ms)


Started GET "/stock_prices/price?symbol=ZOMA.NS,TATADVRA.NS" for ::1 at 2024-10-22 03:22:32 +0700
Processing by StockPricesController#price as */*
  Parameters: {"symbol"=>"ZOMA.NS,TATADVRA.NS"}
Completed 200 OK in 643ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/stock_prices/price?symbols=ZOMA.NS,TATADVRA.NS" for ::1 at 2024-10-22 03:22:39 +0700
Processing by StockPricesController#price as */*
  Parameters: {"symbols"=>"ZOMA.NS,TATADVRA.NS"}
Completed 200 OK in 467ms (Views: 0.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/stock_prices/price?symbol=AAPL" for ::1 at 2024-10-22 03:23:30 +0700
Processing by StockPricesController#price as */*
  Parameters: {"symbol"=>"AAPL"}
Completed 200 OK in 669ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/stock_prices/price?symbol=LTIM.NS" for ::1 at 2024-10-22 03:23:46 +0700
Processing by StockPricesController#price as */*
  Parameters: {"symbol"=>"LTIM.NS"}
Completed 200 OK in 433ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/stock_prices/price?search=LTIM.NS" for ::1 at 2024-10-22 03:25:16 +0700
Processing by StockPricesController#price as */*
  Parameters: {"search"=>"LTIM.NS"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
NameError (undefined local variable or method `search' for #<StockPricesController:0x0000000003db80>):
  
app/controllers/stock_prices_controller.rb:5:in `price'
Started GET "/stock_prices/price?search=LTIM.NS" for ::1 at 2024-10-22 03:26:05 +0700
Processing by StockPricesController#price as */*
  Parameters: {"search"=>"LTIM.NS"}
Completed 200 OK in 633ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/stock_prices/price?search=LTIM.NS" for ::1 at 2024-10-22 03:26:40 +0700
  
SyntaxError (/home/fajarpostman/SystemWallet/app/controllers/stock_prices_controller.rb:4: dynamic constant assignment
        Search = params[:Search]
        ^~~~~~
):
  
app/controllers/stock_prices_controller.rb:4: dynamic constant assignment
Started GET "/stock_prices/price?Search=LTIM.NS" for ::1 at 2024-10-22 03:26:43 +0700
  
SyntaxError (/home/fajarpostman/SystemWallet/app/controllers/stock_prices_controller.rb:4: dynamic constant assignment
        Search = params[:Search]
        ^~~~~~
):
  
app/controllers/stock_prices_controller.rb:4: dynamic constant assignment
Started GET "/stock_prices/price?Search=LTIM.NS" for ::1 at 2024-10-22 03:26:48 +0700
  
SyntaxError (/home/fajarpostman/SystemWallet/app/controllers/stock_prices_controller.rb:4: dynamic constant assignment
        Search = params[:Search]
        ^~~~~~
):
  
app/controllers/stock_prices_controller.rb:4: dynamic constant assignment
Started GET "/stock_prices/price?Search=LTIM.NS" for ::1 at 2024-10-22 03:27:02 +0700
  
SyntaxError (/home/fajarpostman/SystemWallet/app/controllers/stock_prices_controller.rb:4: dynamic constant assignment
        Search = params[:Search]
        ^~~~~~
):
  
app/controllers/stock_prices_controller.rb:4: dynamic constant assignment
Started GET "/stock_prices/price?Search=LTIM.NS" for ::1 at 2024-10-22 03:29:56 +0700
Processing by StockPricesController#price as */*
  Parameters: {"Search"=>"LTIM.NS"}
Completed 200 OK in 697ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/stock_prices/price?search=LTIM.NS" for ::1 at 2024-10-22 03:30:02 +0700
Processing by StockPricesController#price as */*
  Parameters: {"search"=>"LTIM.NS"}
Completed 200 OK in 1276ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/stock_prices/price?search=LTIM.NS" for ::1 at 2024-10-22 03:33:19 +0700
Processing by StockPricesController#price as */*
  Parameters: {"search"=>"LTIM.NS"}
Completed 200 OK in 460ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/stock_prices/price?symbols=LTIM.NS%2CICICLOMB.NS" for ::1 at 2024-10-22 03:35:25 +0700
Processing by StockPricesController#price as */*
  Parameters: {"symbols"=>"LTIM.NS,ICICLOMB.NS"}
Completed 200 OK in 799ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)


Started GET "/stock_prices/price?symbols=LTIM.NS,ICICLOMB.NS" for ::1 at 2024-10-22 03:35:47 +0700
Processing by StockPricesController#price as */*
  Parameters: {"symbols"=>"LTIM.NS,ICICLOMB.NS"}
Completed 200 OK in 431ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 1.1ms)


Started GET "/stock_prices/price?symbols=LTIM.NS,ICICLOMB.NS" for ::1 at 2024-10-22 03:37:23 +0700
Processing by StockPricesController#price as */*
  Parameters: {"symbols"=>"LTIM.NS,ICICLOMB.NS"}
Completed 200 OK in 713ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/stock_prices/price?symbols=LTIM.NS,ICICLOMB.NS" for ::1 at 2024-10-22 03:38:27 +0700
Processing by StockPricesController#price as */*
  Parameters: {"symbols"=>"LTIM.NS,ICICLOMB.NS"}
Completed 200 OK in 417ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.4ms)


Started GET "/stock_prices/prices?symbols=LTIM.NS,ICICLOMB.NS" for ::1 at 2024-10-22 03:38:49 +0700
Processing by StockPricesController#prices as */*
  Parameters: {"symbols"=>"LTIM.NS,ICICLOMB.NS"}
Completed 200 OK in 4048ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.6ms)


Started GET "/stock_prices/prices?symbols=LTIM.NS,ICICLOMB.NS" for ::1 at 2024-10-22 03:40:22 +0700
Processing by StockPricesController#prices as */*
  Parameters: {"symbols"=>"LTIM.NS,ICICLOMB.NS"}
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
SyntaxError (/home/fajarpostman/SystemWallet/lib/latest_stock_price.rb:25: syntax error, unexpected end-of-input):
  
lib/latest_stock_price.rb:25: syntax error, unexpected end-of-input
app/controllers/stock_prices_controller.rb:11:in `prices'
Started GET "/stock_prices/prices?symbols=LTIM.NS,ICICLOMB.NS" for ::1 at 2024-10-22 03:40:46 +0700
Processing by StockPricesController#prices as */*
  Parameters: {"symbols"=>"LTIM.NS,ICICLOMB.NS"}
Completed 200 OK in 488ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/stocks" for ::1 at 2024-10-22 03:41:33 +0700
Processing by StocksController#create as */*
  Parameters: {"stock"=>{"name"=>"Microsoft"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/stocks_controller.rb:5:in `create'
  [1m[36mStock Create (10.3ms)[0m  [1m[32mINSERT INTO "stocks" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Microsoft"], ["created_at", "2024-10-21 20:41:33.343969"], ["updated_at", "2024-10-21 20:41:33.343969"]]
  â†³ app/controllers/stocks_controller.rb:5:in `create'
  [1m[36mWallet Create (0.5ms)[0m  [1m[32mINSERT INTO "wallets" ("balance", "walletable_type", "walletable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["balance", 0.0], ["walletable_type", "Stock"], ["walletable_id", 2], ["created_at", "2024-10-21 20:41:33.441127"], ["updated_at", "2024-10-21 20:41:33.441127"]]
  â†³ app/models/stock.rb:9:in `create_wallet'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."walletable_id" = ? AND "wallets"."walletable_type" = ? LIMIT ?[0m  [["walletable_id", 2], ["walletable_type", "Stock"], ["LIMIT", 1]]
  â†³ app/models/stock.rb:9:in `create_wallet'
  [1m[36mTRANSACTION (8.6ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/stocks_controller.rb:5:in `create'
Completed 201 Created in 170ms (Views: 1.1ms | ActiveRecord: 40.1ms (3 queries, 0 cached) | GC: 0.6ms)


Started GET "/stock_prices/price?search=LTIM.NS" for ::1 at 2024-10-22 03:50:13 +0700
Processing by StockPricesController#price as */*
  Parameters: {"search"=>"LTIM.NS"}
Completed 200 OK in 292ms (Views: 1.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/2/balance" for ::1 at 2024-10-23 11:39:00 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"2"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:5)
  [1m[36mTransaction Sum (1.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 89ms (Views: 0.5ms | ActiveRecord: 4.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 11:39:31 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:18:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:19:in `calculate_balance'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 12:21:02 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:5)
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 200 OK in 54ms (Views: 0.5ms | ActiveRecord: 3.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 12:21:05 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.7ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.0ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 12:21:24 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 12:21:49 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:5)
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 200 OK in 46ms (Views: 0.9ms | ActiveRecord: 2.7ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 12:21:50 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 12:21:51 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 200 OK in 13ms (Views: 2.6ms | ActiveRecord: 0.4ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 12:28:45 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:5)
  [1m[36mTransaction Sum (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 200 OK in 59ms (Views: 0.6ms | ActiveRecord: 3.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 12:28:48 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.7ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-23 12:29:14 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>500.0, "transaction_type"=>"credit", "target_wallet_id"=>1}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mTransaction Create (2.3ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 500.0], ["transaction_type", 0], ["source_wallet_id", nil], ["target_wallet_id", 1], ["created_at", "2024-10-23 05:29:14.677195"], ["updated_at", "2024-10-23 05:29:14.677195"]]
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mTRANSACTION (6.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (2.4ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 1800.0], ["updated_at", "2024-10-23 05:29:14.694305"], ["id", 1]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 201 Created in 39ms (Views: 0.6ms | ActiveRecord: 11.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 12:29:21 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 200 OK in 14ms (Views: 0.3ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 12:31:49 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:5)
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 500 Internal Server Error in 34ms (ActiveRecord: 4.1ms (3 queries, 0 cached) | GC: 3.0ms)


  
NoMethodError (undefined method `user' for #<Wallet balance: 0.18e4, walletable_id: 1, walletable_type: "User", id: 1, created_at: "2024-10-21 09:53:36.804604000 +0000", updated_at: "2024-10-23 05:29:14.694305000 +0000">):
  
app/controllers/wallets_controller.rb:9:in `show_balance'
Started POST "/login" for ::1 at 2024-10-23 12:46:11 +0700
Processing by SessionsController#create as */*
  Parameters: {"name"=>"Fajar Dwi Rianto", "session"=>{"name"=>"Fajar Dwi Rianto"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "Fajar Dwi Rianto"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 500 Internal Server Error in 93ms (ActiveRecord: 13.7ms (1 query, 0 cached) | GC: 5.3ms)


  
ActionDispatch::Request::Session::DisabledSessionError (Your application has sessions disabled. To write to the session you must first configure a session store):
  
app/controllers/sessions_controller.rb:5:in `create'
Started POST "/login" for ::1 at 2024-10-23 12:48:06 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by SessionsController#create as */*
  Parameters: {"name"=>"Fajar Dwi Rianto", "session"=>{"name"=>"Fajar Dwi Rianto"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "Fajar Dwi Rianto"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 500 Internal Server Error in 66ms (ActiveRecord: 3.9ms (1 query, 0 cached) | GC: 0.0ms)


  
ActionDispatch::Request::Session::DisabledSessionError (Your application has sessions disabled. To write to the session you must first configure a session store):
  
app/controllers/sessions_controller.rb:5:in `create'
Started POST "/login" for ::1 at 2024-10-23 12:49:53 +0700
Processing by SessionsController#create as */*
  Parameters: {"user"=>{"name"=>"Fajar Dwi Rianto"}, "session"=>{"user"=>{"name"=>"Fajar Dwi Rianto"}}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 401 Unauthorized in 12ms (Views: 1.1ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-10-23 12:50:05 +0700
Processing by SessionsController#create as */*
  Parameters: {"user"=>{"name"=>"Fajar Dwi Rianto"}, "session"=>{"user"=>{"name"=>"Fajar Dwi Rianto"}}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 401 Unauthorized in 9ms (Views: 0.3ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 3.1ms)


Started POST "/login" for ::1 at 2024-10-23 12:50:20 +0700
Processing by SessionsController#create as */*
  Parameters: {"login"=>{"name"=>"Fajar Dwi Rianto"}, "session"=>{"login"=>{"name"=>"Fajar Dwi Rianto"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-23 13:00:55 +0700
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:5)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>500.0, "transaction_type"=>"debit", "source_wallet_id"=>1, "target_wallet_id"=>2}}
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/transaction.rb:15:in `validate_wallets'
  [1m[36mWallet Load (0.6ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:15:in `validate_wallets'
  [1m[36mTransaction Create (1.2ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 500.0], ["transaction_type", 1], ["source_wallet_id", 1], ["target_wallet_id", 2], ["created_at", "2024-10-23 06:00:55.937167"], ["updated_at", "2024-10-23 06:00:55.937167"]]
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mTRANSACTION (6.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:9:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (5.1ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 1300.0], ["updated_at", "2024-10-23 06:00:55.989243"], ["id", 1]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:17:in `calculate_balance'
  [1m[36mWallet Update (5.1ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 1950.0], ["updated_at", "2024-10-23 06:00:56.058161"], ["id", 2]]
  â†³ app/models/wallet.rb:17:in `calculate_balance'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:17:in `calculate_balance'
Completed 201 Created in 379ms (Views: 10.0ms | ActiveRecord: 43.6ms (9 queries, 0 cached) | GC: 106.8ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 13:01:01 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method `user' for #<Wallet balance: 0.13e4, walletable_id: 1, walletable_type: "User", id: 1, created_at: "2024-10-21 09:53:36.804604000 +0000", updated_at: "2024-10-23 06:00:55.989243000 +0000">):
  
app/controllers/wallets_controller.rb:9:in `show_balance'
Started GET "/wallets/1/balance" for ::1 at 2024-10-23 13:01:24 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:5)
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 2.4ms (3 queries, 0 cached) | GC: 1.9ms)


  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddUserIdToTransactions (20241023060351)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "transactions" ADD "user_id" integer[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241023060351') RETURNING "version"[0m
  [1m[36mTRANSACTION (5.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/transactions" for ::1 at 2024-10-23 13:05:15 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:6)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>500.0, "transaction_type"=>"debit", "source_wallet_id"=>1, "target_wallet_id"=>2, "user_id"=>1}}
[31mUnpermitted parameter: :user_id. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6975601e8>, params: {"transaction"=>{"amount"=>500.0, "transaction_type"=>"debit", "source_wallet_id"=>1, "target_wallet_id"=>2, "user_id"=>1}, "controller"=>"transactions", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mWallet Load (1.7ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:16:in `validate_wallets'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
Completed 422 Unprocessable Content in 70ms (Views: 8.6ms | ActiveRecord: 6.1ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-23 13:07:02 +0700
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:6)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>500.0, "transaction_type"=>"debit", "source_wallet_id"=>1, "target_wallet_id"=>2, "user_id"=>1}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:16:in `validate_wallets'
  [1m[36mTransaction Create (1.9ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 500.0], ["transaction_type", 1], ["source_wallet_id", 1], ["target_wallet_id", 2], ["created_at", "2024-10-23 06:07:02.604328"], ["updated_at", "2024-10-23 06:07:02.604328"], ["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:9:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (4.9ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 800.0], ["updated_at", "2024-10-23 06:07:02.630746"], ["id", 1]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:17:in `calculate_balance'
  [1m[36mWallet Update (2.7ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 2450.0], ["updated_at", "2024-10-23 06:07:02.660238"], ["id", 2]]
  â†³ app/models/wallet.rb:17:in `calculate_balance'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:17:in `calculate_balance'
Completed 201 Created in 138ms (Views: 0.7ms | ActiveRecord: 53.4ms (10 queries, 0 cached) | GC: 35.8ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 13:07:20 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 1.3ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 13:09:52 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:6)
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 200 OK in 132ms (Views: 0.3ms | ActiveRecord: 7.8ms (3 queries, 0 cached) | GC: 95.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 13:11:04 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:6)
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 38ms (Views: 0.2ms | ActiveRecord: 3.9ms (4 queries, 0 cached) | GC: 0.6ms)


Started POST "/transactions" for ::1 at 2024-10-23 13:13:52 +0700
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:6)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"id"=>1, "amount"=>100.0, "transaction_type"=>"credit", "source_wallet_id"=>nil, "target_wallet_id"=>2, "user_id"=>1}, "user_name"=>"John Doe"}
[31mUnpermitted parameter: :id. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc695a36fe8>, params: {"transaction"=>{"id"=>1, "amount"=>100.0, "transaction_type"=>"credit", "source_wallet_id"=>nil, "target_wallet_id"=>2, "user_id"=>1}, "user_name"=>"John Doe", "controller"=>"transactions", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 100.0], ["transaction_type", 0], ["source_wallet_id", nil], ["target_wallet_id", 2], ["created_at", "2024-10-23 06:13:52.917588"], ["updated_at", "2024-10-23 06:13:52.917588"], ["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mTRANSACTION (5.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:34:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (2.7ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 2550.0], ["updated_at", "2024-10-23 06:13:52.939042"], ["id", 2]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 201 Created in 69ms (Views: 0.4ms | ActiveRecord: 14.6ms (6 queries, 0 cached) | GC: 10.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 13:13:59 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.2ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 13:14:03 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-23 13:14:16 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"id"=>1, "amount"=>100.0, "transaction_type"=>"credit", "source_wallet_id"=>nil, "target_wallet_id"=>1, "user_id"=>1}, "user_name"=>"John Doe"}
[31mUnpermitted parameter: :id. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6976273b0>, params: {"transaction"=>{"id"=>1, "amount"=>100.0, "transaction_type"=>"credit", "source_wallet_id"=>nil, "target_wallet_id"=>1, "user_id"=>1}, "user_name"=>"John Doe", "controller"=>"transactions", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 100.0], ["transaction_type", 0], ["source_wallet_id", nil], ["target_wallet_id", 1], ["created_at", "2024-10-23 06:14:16.960793"], ["updated_at", "2024-10-23 06:14:16.960793"], ["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:34:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (3.0ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 900.0], ["updated_at", "2024-10-23 06:14:16.966797"], ["id", 1]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 201 Created in 24ms (Views: 0.3ms | ActiveRecord: 5.8ms (6 queries, 0 cached) | GC: 1.8ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 13:14:21 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.8ms)


Started POST "/transactions" for ::1 at 2024-10-23 13:14:45 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"id"=>1, "amount"=>100.0, "transaction_type"=>"debit", "source_wallet_id"=>1, "target_wallet_id"=>2, "user_id"=>1}, "user_name"=>"John Doe"}
[31mUnpermitted parameter: :id. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc695af8710>, params: {"transaction"=>{"id"=>1, "amount"=>100.0, "transaction_type"=>"debit", "source_wallet_id"=>1, "target_wallet_id"=>2, "user_id"=>1}, "user_name"=>"John Doe", "controller"=>"transactions", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:16:in `validate_wallets'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 100.0], ["transaction_type", 1], ["source_wallet_id", 1], ["target_wallet_id", 2], ["created_at", "2024-10-23 06:14:45.144443"], ["updated_at", "2024-10-23 06:14:45.144443"], ["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:36:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (2.8ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 800.0], ["updated_at", "2024-10-23 06:14:45.153594"], ["id", 1]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:17:in `calculate_balance'
  [1m[36mWallet Update (1.7ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 2650.0], ["updated_at", "2024-10-23 06:14:45.172688"], ["id", 2]]
  â†³ app/models/wallet.rb:17:in `calculate_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:17:in `calculate_balance'
Completed 201 Created in 45ms (Views: 0.5ms | ActiveRecord: 9.8ms (10 queries, 0 cached) | GC: 1.6ms)


Started POST "/transactions" for ::1 at 2024-10-23 13:15:05 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"id"=>1, "amount"=>100.0, "transaction_type"=>"debit", "source_wallet_id"=>1, "target_wallet_id"=>2, "user_id"=>1}, "user_name"=>"Fajar Dwi Rianto"}
[31mUnpermitted parameter: :id. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc697212bd0>, params: {"transaction"=>{"id"=>1, "amount"=>100.0, "transaction_type"=>"debit", "source_wallet_id"=>1, "target_wallet_id"=>2, "user_id"=>1}, "user_name"=>"Fajar Dwi Rianto", "controller"=>"transactions", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:16:in `validate_wallets'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 100.0], ["transaction_type", 1], ["source_wallet_id", 1], ["target_wallet_id", 2], ["created_at", "2024-10-23 06:15:05.638862"], ["updated_at", "2024-10-23 06:15:05.638862"], ["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:36:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (1.8ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 700.0], ["updated_at", "2024-10-23 06:15:05.646331"], ["id", 1]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:17:in `calculate_balance'
  [1m[36mWallet Update (1.9ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 2750.0], ["updated_at", "2024-10-23 06:15:05.661634"], ["id", 2]]
  â†³ app/models/wallet.rb:17:in `calculate_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:17:in `calculate_balance'
Completed 201 Created in 38ms (Views: 0.3ms | ActiveRecord: 8.1ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 13:15:13 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (1.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 27ms (Views: 1.4ms | ActiveRecord: 1.4ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-23 13:15:46 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"id"=>1, "amount"=>100.0, "transaction_type"=>"debit", "source_wallet_id"=>1, "target_wallet_id"=>2}}
[31mUnpermitted parameter: :id. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc695a160e0>, params: {"transaction"=>{"id"=>1, "amount"=>100.0, "transaction_type"=>"debit", "source_wallet_id"=>1, "target_wallet_id"=>2}, "controller"=>"transactions", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/transaction.rb:16:in `validate_wallets'
  [1m[36mWallet Load (1.9ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:16:in `validate_wallets'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
Completed 422 Unprocessable Content in 14ms (Views: 2.5ms | ActiveRecord: 2.4ms (1 query, 0 cached) | GC: 0.0ms)


  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/users" for ::1 at 2024-10-23 13:28:46 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
[31mUnpermitted parameters: :email, :password. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f47b2757000>, params: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}, "controller"=>"users", "action"=>"create"} }[0m
Completed 500 Internal Server Error in 31ms (ActiveRecord: 5.2ms (0 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method `email' for #<User id: nil, name: "Fajar Dwi Rianto", created_at: nil, updated_at: nil>):
  
app/controllers/users_controller.rb:5:in `create'
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddEmailAndEncryptedPasswordToUsers (20241023062959)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TEMPORARY TABLE "ausers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "ausers" ("id","name","created_at","updated_at")
                     SELECT "id","name","created_at","updated_at" FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddEmailAndEncryptedPasswordToUsers (20241023062959)
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddEmailAndEncryptedPasswordToUsers (20241023062959)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TEMPORARY TABLE "ausers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "ausers" ("id","name","created_at","updated_at")
                     SELECT "id","name","created_at","updated_at" FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "email" varchar NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "users" ("id","name","created_at","updated_at")
                     SELECT "id","name","created_at","updated_at" FROM "ausers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddEmailAndEncryptedPasswordToUsers (20241023062959)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "users" ADD "email" varchar[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "encrypted_password" varchar[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20241023062959') RETURNING "version"[0m
  [1m[36mTRANSACTION (5.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/users" for ::1 at 2024-10-23 13:32:34 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
[31mUnpermitted parameters: :email, :password. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f33d8753f38>, params: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}, "controller"=>"users", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/users_controller.rb:5:in `create'
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:5:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/users_controller.rb:5:in `create'
Completed 422 Unprocessable Content in 50ms (Views: 8.0ms | ActiveRecord: 5.9ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/users" for ::1 at 2024-10-23 13:33:34 +0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :password. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f33d74029e8>, params: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}, "controller"=>"users", "action"=>"create"} }[0m
[31mUnpermitted parameter: :password. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f33d74029e8>, params: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}, "controller"=>"users", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/users_controller.rb:25:in `create'
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:25:in `create'
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Fajar Dwi Rianto"], ["created_at", "2024-10-23 06:33:35.057050"], ["updated_at", "2024-10-23 06:33:35.057050"], ["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"]]
  â†³ app/controllers/users_controller.rb:25:in `create'
  [1m[36mWallet Create (0.3ms)[0m  [1m[32mINSERT INTO "wallets" ("balance", "walletable_type", "walletable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["balance", 0.0], ["walletable_type", "User"], ["walletable_id", 3], ["created_at", "2024-10-23 06:33:35.086668"], ["updated_at", "2024-10-23 06:33:35.086668"]]
  â†³ app/models/user.rb:26:in `create_wallet'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."walletable_id" = ? AND "wallets"."walletable_type" = ? LIMIT ?[0m  [["walletable_id", 3], ["walletable_type", "User"], ["LIMIT", 1]]
  â†³ app/models/user.rb:26:in `create_wallet'
  [1m[36mTRANSACTION (5.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/users_controller.rb:25:in `create'
Completed 201 Created in 378ms (Views: 0.6ms | ActiveRecord: 11.8ms (4 queries, 0 cached) | GC: 28.4ms)


Started POST "/transactions" for ::1 at 2024-10-23 13:34:10 +0700
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:6)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"id"=>1, "amount"=>100.0, "transaction_type"=>"debit", "source_wallet_id"=>1, "target_wallet_id"=>2}}
Filter chain halted as :set_user rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-23 13:34:13 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"id"=>1, "amount"=>100.0, "transaction_type"=>"debit", "source_wallet_id"=>1, "target_wallet_id"=>2}}
Filter chain halted as :set_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-23 13:34:44 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"id"=>1, "amount"=>200.0, "transaction_type"=>"credit", "target_wallet_id"=>1}}
Filter chain halted as :set_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/users" for ::1 at 2024-10-23 13:38:33 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :password. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007fe41d055290>, params: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}, "controller"=>"users", "action"=>"create"} }[0m
[31mUnpermitted parameter: :password. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007fe41d055290>, params: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}, "controller"=>"users", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/users_controller.rb:25:in `create'
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:25:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/users_controller.rb:25:in `create'
Completed 422 Unprocessable Content in 305ms (Views: 6.4ms | ActiveRecord: 5.1ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-23 13:38:40 +0700
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:6)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"id"=>1, "amount"=>200.0, "transaction_type"=>"credit", "target_wallet_id"=>1}}
[31mUnpermitted parameter: :id. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fe41a01b408>, params: {"transaction"=>{"id"=>1, "amount"=>200.0, "transaction_type"=>"credit", "target_wallet_id"=>1}, "controller"=>"transactions", "action"=>"create"} }[0m
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.5ms (0 queries, 0 cached) | GC: 0.0ms)


  
NameError (undefined local variable or method `current_user' for #<TransactionsController:0x0000000000a078>):
  
app/controllers/transactions_controller.rb:65:in `create'
Started POST "/login" for ::1 at 2024-10-23 13:39:22 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 401 Unauthorized in 281ms (Views: 0.5ms | ActiveRecord: 1.4ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/sessions" for ::1 at 2024-10-23 13:40:16 +0700
  
ActionController::RoutingError (No route matches [POST] "/sessions"):
  
Started POST "/login" for ::1 at 2024-10-23 13:40:29 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:3:in `create'
Completed 401 Unauthorized in 257ms (Views: 0.3ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-23 13:40:38 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"id"=>1, "amount"=>200.0, "transaction_type"=>"credit", "target_wallet_id"=>1}}
[31mUnpermitted parameter: :id. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fe419ec4e38>, params: {"transaction"=>{"id"=>1, "amount"=>200.0, "transaction_type"=>"credit", "target_wallet_id"=>1}, "controller"=>"transactions", "action"=>"create"} }[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
NameError (undefined local variable or method `current_user' for #<TransactionsController:0x0000000000a230>):
  
app/controllers/transactions_controller.rb:65:in `create'
Started POST "/transactions" for ::1 at 2024-10-23 13:40:43 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"id"=>1, "amount"=>200.0, "transaction_type"=>"credit", "target_wallet_id"=>1}}
[31mUnpermitted parameter: :id. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fe419fdaca0>, params: {"transaction"=>{"id"=>1, "amount"=>200.0, "transaction_type"=>"credit", "target_wallet_id"=>1}, "controller"=>"transactions", "action"=>"create"} }[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
NameError (undefined local variable or method `current_user' for #<TransactionsController:0x0000000000a2d0>):
  
app/controllers/transactions_controller.rb:65:in `create'
Started POST "/transactions" for ::1 at 2024-10-23 13:40:49 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"id"=>1, "amount"=>200.0, "transaction_type"=>"credit", "target_wallet_id"=>1}}
[31mUnpermitted parameter: :id. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fe419cdcbc0>, params: {"transaction"=>{"id"=>1, "amount"=>200.0, "transaction_type"=>"credit", "target_wallet_id"=>1}, "controller"=>"transactions", "action"=>"create"} }[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
NameError (undefined local variable or method `current_user' for #<TransactionsController:0x0000000000a370>):
  
app/controllers/transactions_controller.rb:65:in `create'
Started POST "/transactions" for ::1 at 2024-10-23 13:40:53 +0700
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:6)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"id"=>1, "amount"=>200.0, "transaction_type"=>"credit", "target_wallet_id"=>1}}
Filter chain halted as :set_user rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-10-23 13:47:42 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:24:in `create'
Completed 401 Unauthorized in 292ms (Views: 0.5ms | ActiveRecord: 4.4ms (1 query, 0 cached) | GC: 11.5ms)


Started POST "/sessions" for ::1 at 2024-10-23 13:47:51 +0700
  
ActionController::RoutingError (No route matches [POST] "/sessions"):
  
Started POST "/login" for ::1 at 2024-10-23 13:50:23 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:24:in `create'
Completed 401 Unauthorized in 314ms (Views: 0.5ms | ActiveRecord: 4.1ms (1 query, 0 cached) | GC: 1.6ms)


Started POST "/login" for ::1 at 2024-10-23 13:50:38 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:24:in `create'
Completed 401 Unauthorized in 259ms (Views: 0.2ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.9ms)


Started POST "/users" for ::1 at 2024-10-23 13:50:41 +0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'password' for User.):

Causes:
NoMethodError (undefined method `password=' for #<User id: nil, name: "Fajar Dwi Rianto", created_at: nil, updated_at: nil, email: [FILTERED], encrypted_password: nil>)
  
app/controllers/users_controller.rb:22:in `create'
Started GET "/controllers/users_controller.rb:22:in" for ::1 at 2024-10-23 13:50:55 +0700
  
ActionController::RoutingError (No route matches [GET] "/controllers/users_controller.rb:22:in"):
  
Started POST "/users" for ::1 at 2024-10-23 13:52:13 +0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :password. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007fe419ec26d8>, params: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}, "controller"=>"users", "action"=>"create"} }[0m
[31mUnpermitted parameter: :password. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007fe419ec26d8>, params: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}, "controller"=>"users", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/users_controller.rb:25:in `create'
  [1m[36mUser Exists? (4.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:25:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/users_controller.rb:25:in `create'
Completed 422 Unprocessable Content in 304ms (Views: 3.7ms | ActiveRecord: 12.4ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-10-23 13:52:33 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:24:in `create'
Completed 401 Unauthorized in 256ms (Views: 0.3ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-10-23 13:52:35 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:24:in `create'
Completed 401 Unauthorized in 234ms (Views: 0.3ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/users" for ::1 at 2024-10-23 13:52:39 +0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :password. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007fe41a0ca480>, params: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}, "controller"=>"users", "action"=>"create"} }[0m
[31mUnpermitted parameter: :password. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007fe41a0ca480>, params: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}, "controller"=>"users", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/users_controller.rb:25:in `create'
  [1m[36mUser Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:25:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/users_controller.rb:25:in `create'
Completed 422 Unprocessable Content in 265ms (Views: 0.6ms | ActiveRecord: 3.5ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-10-23 13:52:42 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:24:in `create'
Completed 401 Unauthorized in 264ms (Views: 0.2ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-10-23 13:55:10 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:44:in `create'
Completed 401 Unauthorized in 348ms (Views: 0.3ms | ActiveRecord: 4.0ms (1 query, 0 cached) | GC: 0.6ms)


Started POST "/login" for ::1 at 2024-10-23 13:55:12 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:44:in `create'
Completed 401 Unauthorized in 289ms (Views: 0.2ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-23 13:55:17 +0700
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:28)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"id"=>1, "amount"=>200.0, "transaction_type"=>"credit", "target_wallet_id"=>1}}
Filter chain halted as :set_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)


Started POST "/login" for ::1 at 2024-10-23 13:55:22 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:44:in `create'
Completed 401 Unauthorized in 255ms (Views: 0.2ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/users" for ::1 at 2024-10-23 13:55:45 +0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Marsel", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'password' for User.):

Causes:
NoMethodError (undefined method `password=' for #<User id: nil, name: "Marsel", created_at: nil, updated_at: nil, email: [FILTERED], encrypted_password: nil>)
  
app/controllers/users_controller.rb:46:in `create'
Started POST "/users" for ::1 at 2024-10-23 13:57:51 +0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Marsel", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 11ms (ActiveRecord: 4.1ms (0 queries, 0 cached) | GC: 1.2ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'password' for User.):

Causes:
NoMethodError (undefined method `password=' for #<User id: nil, name: "Marsel", created_at: nil, updated_at: nil, email: [FILTERED], encrypted_password: nil>)
  
app/controllers/users_controller.rb:70:in `create'
Started POST "/sessions" for ::1 at 2024-10-23 13:58:08 +0700
  
ActionController::RoutingError (No route matches [POST] "/sessions"):
  
Started POST "/login" for ::1 at 2024-10-23 13:58:13 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:44:in `create'
Completed 401 Unauthorized in 296ms (Views: 0.3ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/users" for ::1 at 2024-10-23 13:58:27 +0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"John Doex", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'password' for User.):

Causes:
NoMethodError (undefined method `password=' for #<User id: nil, name: "John Doex", created_at: nil, updated_at: nil, email: [FILTERED], encrypted_password: nil>)
  
app/controllers/users_controller.rb:70:in `create'
Started POST "/users" for ::1 at 2024-10-23 13:59:32 +0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"John Doex", "email"=>"[FILTERED]"}, "password"=>"[FILTERED]"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/users_controller.rb:76:in `create'
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:76:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/users_controller.rb:76:in `create'
Completed 422 Unprocessable Content in 20ms (Views: 1.1ms | ActiveRecord: 5.3ms (1 query, 0 cached) | GC: 0.2ms)


Started POST "/users" for ::1 at 2024-10-23 13:59:52 +0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"John Doex", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :password. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007fe41a181ae0>, params: {"user"=>{"name"=>"John Doex", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}, "controller"=>"users", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/users_controller.rb:76:in `create'
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:76:in `create'
  [1m[36mUser Create (2.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "John Doex"], ["created_at", "2024-10-23 06:59:52.720731"], ["updated_at", "2024-10-23 06:59:52.720731"], ["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"]]
  â†³ app/controllers/users_controller.rb:76:in `create'
  [1m[36mWallet Create (0.5ms)[0m  [1m[32mINSERT INTO "wallets" ("balance", "walletable_type", "walletable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["balance", 0.0], ["walletable_type", "User"], ["walletable_id", 4], ["created_at", "2024-10-23 06:59:52.766740"], ["updated_at", "2024-10-23 06:59:52.766740"]]
  â†³ app/models/user.rb:24:in `create_wallet'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."walletable_id" = ? AND "wallets"."walletable_type" = ? LIMIT ?[0m  [["walletable_id", 4], ["walletable_type", "User"], ["LIMIT", 1]]
  â†³ app/models/user.rb:24:in `create_wallet'
  [1m[36mTRANSACTION (7.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/users_controller.rb:76:in `create'
Completed 201 Created in 324ms (Views: 0.8ms | ActiveRecord: 12.6ms (4 queries, 0 cached) | GC: 0.7ms)


Started POST "/login" for ::1 at 2024-10-23 14:00:12 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:44:in `create'
Completed 500 Internal Server Error in 258ms (ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)


  
ActionDispatch::Request::Session::DisabledSessionError (Your application has sessions disabled. To write to the session you must first configure a session store):
  
app/controllers/sessions_controller.rb:52:in `create'
Started POST "/login" for ::1 at 2024-10-23 14:02:00 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:44:in `create'
Completed 500 Internal Server Error in 266ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.3ms)


  
ActionDispatch::Request::Session::DisabledSessionError (Your application has sessions disabled. To write to the session you must first configure a session store):
  
app/controllers/sessions_controller.rb:52:in `create'
Started POST "/login" for ::1 at 2024-10-23 14:02:47 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:44:in `create'
Completed 500 Internal Server Error in 270ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)


  
ActionDispatch::Request::Session::DisabledSessionError (Your application has sessions disabled. To write to the session you must first configure a session store):
  
app/controllers/sessions_controller.rb:52:in `create'
Started POST "/login" for ::1 at 2024-10-23 14:02:49 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:44:in `create'
Completed 500 Internal Server Error in 235ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


  
ActionDispatch::Request::Session::DisabledSessionError (Your application has sessions disabled. To write to the session you must first configure a session store):
  
app/controllers/sessions_controller.rb:52:in `create'
Started POST "/login" for ::1 at 2024-10-23 14:03:07 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:44:in `create'
Completed 401 Unauthorized in 241ms (Views: 0.3ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-10-23 14:03:18 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:44:in `create'
Completed 500 Internal Server Error in 266ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


  
ActionDispatch::Request::Session::DisabledSessionError (Your application has sessions disabled. To write to the session you must first configure a session store):
  
app/controllers/sessions_controller.rb:52:in `create'
Started POST "/login" for ::1 at 2024-10-23 14:03:21 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:44:in `create'
Completed 500 Internal Server Error in 245ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)


  
ActionDispatch::Request::Session::DisabledSessionError (Your application has sessions disabled. To write to the session you must first configure a session store):
  
app/controllers/sessions_controller.rb:52:in `create'
Started POST "/users" for ::1 at 2024-10-23 14:03:33 +0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"John Doex", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :password. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007fe419ec3178>, params: {"user"=>{"name"=>"John Doex", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}, "controller"=>"users", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/users_controller.rb:76:in `create'
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:76:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/users_controller.rb:76:in `create'
Completed 422 Unprocessable Content in 246ms (Views: 0.9ms | ActiveRecord: 2.0ms (1 query, 0 cached) | GC: 0.4ms)


Started POST "/login" for ::1 at 2024-10-23 14:03:39 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:44:in `create'
Completed 401 Unauthorized in 278ms (Views: 0.5ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Started POST "/transactions" for ::1 at 2024-10-23 14:06:14 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:28)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"id"=>1, "amount"=>200.0, "transaction_type"=>"credit", "target_wallet_id"=>1}}
Filter chain halted as :set_user rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-10-23 14:06:17 +0700
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:44:in `create'
Completed 500 Internal Server Error in 315ms (ActiveRecord: 2.5ms (1 query, 0 cached) | GC: 0.0ms)


  
ActionDispatch::Request::Session::DisabledSessionError (Your application has sessions disabled. To write to the session you must first configure a session store):
  
app/controllers/sessions_controller.rb:52:in `create'
Started GET "/wallets/1/balance" for ::1 at 2024-10-23 14:06:22 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.3ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 78ms (Views: 0.8ms | ActiveRecord: 4.0ms (4 queries, 0 cached) | GC: 4.4ms)


Started POST "/transactions" for ::1 at 2024-10-23 14:07:30 +0700
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:6)
Error occurred while parsing request parameters.
Contents:

{
  "transaction": {
    "amount": 500.00,
    "transaction_type": "credit",
    "target_wallet_id": 1, 
    "user_id": 1
  }
}

{
  "transaction": {
    "id": 1,
    "amount": 200.00,
    "transaction_type": "credit",
    
    "target_wallet_id": 1
    
  }
}

Processing by TransactionsController#create as */*
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
ActionDispatch::Http::Parameters::ParseError (Error occurred while parsing request parameters):

Causes:
JSON::ParserError (unexpected token at '{
  "transaction": {
    "id": 1,
    "amount": 200.00,
    "transaction_type": "credit",
    
    "target_wallet_id": 1
    
  }
}
')
  
app/controllers/transactions_controller.rb:57:in `transaction_params'
app/controllers/transactions_controller.rb:30:in `create'
Started POST "/transactions" for ::1 at 2024-10-23 14:07:35 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>500.0, "transaction_type"=>"credit", "target_wallet_id"=>1, "user_id"=>1}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 500.0], ["transaction_type", 0], ["source_wallet_id", nil], ["target_wallet_id", 1], ["created_at", "2024-10-23 07:07:35.629390"], ["updated_at", "2024-10-23 07:07:35.629390"], ["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mTRANSACTION (5.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:34:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (3.3ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 1200.0], ["updated_at", "2024-10-23 07:07:35.648124"], ["id", 1]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 201 Created in 65ms (Views: 0.5ms | ActiveRecord: 15.5ms (6 queries, 0 cached) | GC: 3.1ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 14:07:41 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 15ms (Views: 0.3ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-23 14:08:14 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>200.0, "transaction_type"=>"debit", "source_wallet_id"=>2, "target_wallet_id"=>1, "user_id"=>1}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:16:in `validate_wallets'
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 200.0], ["transaction_type", 1], ["source_wallet_id", 2], ["target_wallet_id", 1], ["created_at", "2024-10-23 07:08:14.564646"], ["updated_at", "2024-10-23 07:08:14.564646"], ["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:36:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (2.2ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 2550.0], ["updated_at", "2024-10-23 07:08:14.574317"], ["id", 2]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:17:in `calculate_balance'
  [1m[36mWallet Update (1.5ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 1400.0], ["updated_at", "2024-10-23 07:08:14.600327"], ["id", 1]]
  â†³ app/models/wallet.rb:17:in `calculate_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:17:in `calculate_balance'
Completed 201 Created in 50ms (Views: 0.4ms | ActiveRecord: 9.4ms (10 queries, 0 cached) | GC: 9.6ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 14:08:20 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 1.3ms)


Started POST "/transactions" for ::1 at 2024-10-23 14:08:37 +0700
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>600.0, "transaction_type"=>"debit", "source_wallet_id"=>2, "target_wallet_id"=>1, "user_id"=>1}}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/transaction.rb:16:in `validate_wallets'
  [1m[36mTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 600.0], ["transaction_type", 1], ["source_wallet_id", 2], ["target_wallet_id", 1], ["created_at", "2024-10-23 07:08:37.537427"], ["updated_at", "2024-10-23 07:08:37.537427"], ["user_id", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:36:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (2.2ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 1950.0], ["updated_at", "2024-10-23 07:08:37.544489"], ["id", 2]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:17:in `calculate_balance'
  [1m[36mWallet Update (1.9ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 2000.0], ["updated_at", "2024-10-23 07:08:37.560730"], ["id", 1]]
  â†³ app/models/wallet.rb:17:in `calculate_balance'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:17:in `calculate_balance'
Completed 201 Created in 40ms (Views: 0.3ms | ActiveRecord: 11.2ms (10 queries, 0 cached) | GC: 1.5ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 14:08:42 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.6ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 16ms (Views: 0.7ms | ActiveRecord: 0.9ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/2/balance" for ::1 at 2024-10-23 14:08:47 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"2"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 2]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 2]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mTeam Load (0.2ms)[0m  [1m[34mSELECT "teams".* FROM "teams" WHERE "teams"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 40ms (Views: 0.2ms | ActiveRecord: 1.5ms (4 queries, 0 cached) | GC: 1.4ms)


Started GET "/wallets/3/balance" for ::1 at 2024-10-23 14:09:01 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"3"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 3]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 3]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 1.7ms (4 queries, 0 cached) | GC: 0.9ms)


Started GET "/wallets/4/balance" for ::1 at 2024-10-23 14:09:05 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"4"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 4]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 4]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.2ms)


Started GET "/wallets/5/balance" for ::1 at 2024-10-23 14:09:14 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"5"}
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 5]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.5ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 5]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mStock Load (0.1ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/5/balance" for ::1 at 2024-10-23 14:10:41 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"5"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:6)
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 5]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 5]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 86ms (Views: 0.3ms | ActiveRecord: 4.2ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 14:10:47 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 1.1ms (4 queries, 0 cached) | GC: 0.0ms)


  [1m[35m (0.3ms)[0m  [1m[35mTRUNCATE TABLE schema_migrations CASCADE[0m
Started GET "/wallets/1/balance" for ::1 at 2024-10-23 14:11:25 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:6)
  [1m[36mTransaction Sum (0.1ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 1]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 1]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 63ms (Views: 0.5ms | ActiveRecord: 3.5ms (4 queries, 0 cached) | GC: 0.0ms)


  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTruncate Tables (6.4ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "teams";
DELETE FROM "stocks";
DELETE FROM "wallets";
DELETE FROM "transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTruncate Tables (5.4ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "teams";
DELETE FROM "stocks";
DELETE FROM "wallets";
DELETE FROM "transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
Started GET "/wallets/1/balance" for ::1 at 2024-10-23 14:13:15 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
Completed 404 Not Found in 43ms (Views: 0.3ms | ActiveRecord: 2.0ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/users" for ::1 at 2024-10-23 14:13:43 +0700
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :password. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007f5d706b30d0>, params: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}, "controller"=>"users", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/users_controller.rb:76:in `create'
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:76:in `create'
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Fajar Dwi Rianto"], ["created_at", "2024-10-23 07:13:43.564266"], ["updated_at", "2024-10-23 07:13:43.564266"], ["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"]]
  â†³ app/controllers/users_controller.rb:76:in `create'
  [1m[36mWallet Create (0.3ms)[0m  [1m[32mINSERT INTO "wallets" ("balance", "walletable_type", "walletable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["balance", 0.0], ["walletable_type", "User"], ["walletable_id", 5], ["created_at", "2024-10-23 07:13:43.585424"], ["updated_at", "2024-10-23 07:13:43.585424"]]
  â†³ app/models/user.rb:24:in `create_wallet'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."walletable_id" = ? AND "wallets"."walletable_type" = ? LIMIT ?[0m  [["walletable_id", 5], ["walletable_type", "User"], ["LIMIT", 1]]
  â†³ app/models/user.rb:24:in `create_wallet'
  [1m[36mTRANSACTION (6.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/users_controller.rb:76:in `create'
Completed 201 Created in 299ms (Views: 0.7ms | ActiveRecord: 9.2ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/1/balance" for ::1 at 2024-10-23 14:13:51 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"1"}
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
Completed 404 Not Found in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/wallets/5/balance" for ::1 at 2024-10-23 14:14:04 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"5"}
  [1m[36mWallet Load (0.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
Completed 404 Not Found in 2ms (Views: 0.2ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/transactions" for ::1 at 2024-10-23 14:14:24 +0700
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:6)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>1600.0, "transaction_type"=>"credit", "target_wallet_id"=>1, "user_id"=>1}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/transactions_controller.rb:32:in `create'
Completed 422 Unprocessable Content in 34ms (Views: 6.3ms | ActiveRecord: 3.1ms (1 query, 0 cached) | GC: 0.0ms)


  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/login" for ::1 at 2024-10-23 14:15:22 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by SessionsController#create as */*
  Parameters: {"session"=>{"email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/sessions_controller.rb:44:in `create'
Completed 500 Internal Server Error in 298ms (ActiveRecord: 2.7ms (1 query, 0 cached) | GC: 0.0ms)


  
ActionDispatch::Request::Session::DisabledSessionError (Your application has sessions disabled. To write to the session you must first configure a session store):
  
app/controllers/sessions_controller.rb:52:in `create'
  [1m[36mUser Load (9.5ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for pp */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mWallet Load (0.6ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" /* loading for pp */ LIMIT ?[0m  [["LIMIT", 11]]
Started POST "/transactions" for ::1 at 2024-10-23 14:19:56 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:6)
Processing by TransactionsController#create as */*
  Parameters: {"transaction"=>{"amount"=>1600.0, "transaction_type"=>"credit", "target_wallet_id"=>8, "user_id"=>5}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mTransaction Create (1.0ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "transaction_type", "source_wallet_id", "target_wallet_id", "created_at", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["amount", 1600.0], ["transaction_type", 0], ["source_wallet_id", nil], ["target_wallet_id", 8], ["created_at", "2024-10-23 07:19:56.469239"], ["updated_at", "2024-10-23 07:19:56.469239"], ["user_id", 5]]
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mTRANSACTION (6.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/transactions_controller.rb:5:in `create'
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mWallet Update (3.9ms)[0m  [1m[33mUPDATE "wallets" SET "balance" = ?, "updated_at" = ? WHERE "wallets"."id" = ?[0m  [["balance", 1600.0], ["updated_at", "2024-10-23 07:19:56.490693"], ["id", 8]]
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/wallet.rb:10:in `update_balance'
  [1m[36mTransaction Sum (0.4ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 8]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 8]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
Completed 201 Created in 104ms (Views: 1.4ms | ActiveRecord: 18.1ms (6 queries, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:6)
  [1m[36mTransaction Load (3.8ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" /* loading for pp */ LIMIT ?[0m  [["LIMIT", 11]]
Started GET "/stock_prices/price_all" for ::1 at 2024-10-23 14:24:17 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by StockPricesController#price_all as */*
Completed 200 OK in 3319ms (Views: 50.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 13.6ms)


Started GET "/stock_prices/price?search=ZOMA.NS" for ::1 at 2024-10-23 14:24:35 +0700
Processing by StockPricesController#price as */*
  Parameters: {"search"=>"ZOMA.NS"}
Completed 200 OK in 4164ms (Views: 0.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 2.1ms)


Started GET "/stock_prices/prices?symbols=LTIM.NS,ICICLOMB.NS" for ::1 at 2024-10-23 14:24:45 +0700
Processing by StockPricesController#prices as */*
  Parameters: {"symbols"=>"LTIM.NS,ICICLOMB.NS"}
Completed 200 OK in 4714ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:6)
  [1m[36mTransaction Delete All (6.4ms)[0m  [1m[31mDELETE FROM "transactions"[0m
  [1m[36mUser Delete All (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mWallet Delete All (0.2ms)[0m  [1m[31mDELETE FROM "wallets"[0m
  [1m[36mStock Delete All (0.2ms)[0m  [1m[31mDELETE FROM "stocks"[0m
  [1m[36mTeam Delete All (0.3ms)[0m  [1m[31mDELETE FROM "teams"[0m
Started POST "/users" for ::1 at 2024-10-23 14:27:43 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}}
[31mUnpermitted parameter: :password. Context: { controller: UsersController, action: create, request: #<ActionDispatch::Request:0x00007fb0dfe14a78>, params: {"user"=>{"name"=>"Fajar Dwi Rianto", "email"=>"[FILTERED]", "password"=>"[FILTERED]"}, "controller"=>"users", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/users_controller.rb:9:in `create'
  [1m[36mUser Exists? (4.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:9:in `create'
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "created_at", "updated_at", "email", "encrypted_password") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Fajar Dwi Rianto"], ["created_at", "2024-10-23 07:27:43.761082"], ["updated_at", "2024-10-23 07:27:43.761082"], ["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"]]
  â†³ app/controllers/users_controller.rb:9:in `create'
  [1m[36mWallet Create (0.5ms)[0m  [1m[32mINSERT INTO "wallets" ("balance", "walletable_type", "walletable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["balance", 0.0], ["walletable_type", "User"], ["walletable_id", 6], ["created_at", "2024-10-23 07:27:43.788747"], ["updated_at", "2024-10-23 07:27:43.788747"]]
  â†³ app/models/user.rb:21:in `create_wallet'
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."walletable_id" = ? AND "wallets"."walletable_type" = ? LIMIT ?[0m  [["walletable_id", 6], ["walletable_type", "User"], ["LIMIT", 1]]
  â†³ app/models/user.rb:21:in `create_wallet'
  [1m[36mTRANSACTION (5.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/users_controller.rb:9:in `create'
Completed 201 Created in 331ms (Views: 0.8ms | ActiveRecord: 14.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/wallets/9/balance" for ::1 at 2024-10-23 14:27:53 +0700
Processing by WalletsController#show_balance as */*
  Parameters: {"id"=>"9"}
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:3:in `show_balance'
DEPRECATION WARNING: Defining enums with keyword arguments is deprecated and will be removed
in Rails 8.0. Positional arguments should be used instead:

enum :transaction_type, {:credit=>0, :debit=>1}
 (called from <class:Transaction> at /home/fajarpostman/SystemWallet/app/models/transaction.rb:6)
  [1m[36mTransaction Sum (0.9ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."target_wallet_id" = ?[0m  [["target_wallet_id", 9]]
  â†³ app/models/wallet.rb:14:in `calculate_balance'
  [1m[36mTransaction Sum (0.2ms)[0m  [1m[34mSELECT SUM("transactions"."amount") FROM "transactions" WHERE "transactions"."source_wallet_id" = ?[0m  [["source_wallet_id", 9]]
  â†³ app/models/wallet.rb:15:in `calculate_balance'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/controllers/wallets_controller.rb:11:in `show_balance'
Completed 200 OK in 26ms (Views: 0.9ms | ActiveRecord: 2.1ms (4 queries, 0 cached) | GC: 0.0ms)


